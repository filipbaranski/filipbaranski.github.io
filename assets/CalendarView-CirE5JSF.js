import{d as $,j as x,s as O,a as F,k as y,b as _,w as Y,o,e as d,i as c,h as n,t as g,c as s,F as D,m as M,n as L}from"./index-DeCm5EoA.js";import{M as B}from"./MainLayout-CJLtSuu1.js";import{b as S,C as V,a as E}from"./CalendarModal-O3stJP4v.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"calendar"},I=["disabled"],j=["disabled"],P={key:1,class:"calendar-proper"},R={key:0,class:"calendar-loader"},T={key:1,class:"calendar-mask"},W=["onClick"],q={key:0},A={key:1,class:"calendar-day-footer"},G=["src"],H=$({__name:"CalendarView",setup(J){const l=x(),{calendar:h,calendarLoading:u}=O(l),r=new Date,e=F({currentDate:r,editModalOpen:!1,editedData:{},currentDay:r.getDate(),month:r.getMonth(),year:r.getFullYear()}),m=y(()=>new Date(e.year,e.month,1)),v=y(()=>{const a=m.value.getDay()+1;return a===1?6:a-2}),k=y(()=>new Date(e.year,e.month+1,0).getDate()),C=a=>{if((a<=e.currentDay||e.month!==e.currentDate.getMonth()||e.year!==e.currentDate.getFullYear())&&l.calendarLoading===!1){const{_id:i,red:t,is_cube:f}=l.calendar,w={date:`${a>=10?a:`0${a}`}.${e.month>=9?e.month+1:`0${e.month+1}`}.${e.year}`,id:i,day:a,month:e.month,year:e.year,red:t.indexOf(a)!==-1,is_cube:f.indexOf(a)!==-1};e.editedData=w,e.editModalOpen=!0}},b=()=>{e.editModalOpen=!1,e.editedData={}},p=async a=>{if(window.navigator.onLine){if(a==="previous"&&e.month===0){if(await l.getMonth({year:e.year-1,month:12})===!0){e.month=11,e.year-=1;return}return}if(a==="previous"&&e.month!==0){if(await l.getMonth({year:e.year,month:e.month})===!0){e.month-=1;return}return}if(a==="next"&&e.month===11){if(await l.getMonth({year:e.year+1,month:1})===!0){e.month=0,e.year+=1;return}return}a==="next"&&e.month!==11&&await l.getMonth({year:e.year,month:e.month+2})===!0&&(e.month+=1)}};return(a,i)=>(o(),_(B,null,{default:Y(()=>[d("section",z,[e.editModalOpen?(o(),_(S,{key:0,data:e.editedData,onCloseModal:b},null,8,["data"])):c("",!0),d("nav",null,[d("button",{disabled:e.year===2024&&e.month===10||n(u),onClick:i[0]||(i[0]=t=>p("previous"))}," Poprzedni ",8,I),d("h2",null,g(`${new Date(e.year,e.month,1).toLocaleString("default",{month:"long"})} ${e.year}`),1),d("button",{disabled:e.year===n(r).getFullYear()&&e.month===n(r).getMonth()||n(u),onClick:i[1]||(i[1]=t=>p("next"))}," NastÄ™pny ",8,j)]),n(h).year?(o(),s("main",P,[n(u)?(o(),s("div",R)):c("",!0),n(u)?(o(),s("div",T)):c("",!0),(o(!0),s(D,null,M(v.value,t=>(o(),s("div",{key:`empty-${t}`,class:"calendar-day"}))),128)),(o(!0),s(D,null,M(k.value,t=>(o(),s("div",{key:`actual-${t}`,class:L({"calendar-day":!0,"calendar-day-filled":!0,red:n(h).red.indexOf(t)!==-1,weekend:(t+m.value.getDay())%7===0||(t+m.value.getDay())%7===1,blocked:t>e.currentDay&&e.month===n(r).getMonth()&&e.year===n(r).getFullYear(),current:t===e.currentDay&&e.month===n(r).getMonth()&&e.year===n(r).getFullYear()}),onClick:f=>C(t)},[t>e.currentDay&&e.month===n(r).getMonth()&&e.year===n(r).getFullYear()?(o(),s("p",q,g(t),1)):c("",!0),t<=e.currentDay||e.month!==n(r).getMonth()||e.year!==n(r).getFullYear()?(o(),s("div",A,[d("img",{src:n(h).is_cube.indexOf(t)===-1?n(V):n(E)},null,8,G)])):c("",!0)],10,W))),128))])):c("",!0)])]),_:1}))}}),Z=N(H,[["__scopeId","data-v-f86930b3"]]);export{Z as default};
