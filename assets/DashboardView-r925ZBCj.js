import{d as k,j as O,s as $,a as S,k as w,h as l,o as t,c as a,i as r,e as _,n as P,l as A,F as D,m as g,t as b,p as J,q as U,b as T,w as Z,x as I}from"./index-DeCm5EoA.js";import{M as q}from"./MainLayout-CJLtSuu1.js";import{C as R,a as W,b as G}from"./CalendarModal-O3stJP4v.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={key:0,class:"calendar_day-loader"},K={key:1,class:"calendar_day-mask"},Q={class:"calendar_day"},X=["src"],ee=k({__name:"DashboardCalendar",setup(E){const f=O(),{calendar:h,calendarLoading:c}=$(f),p=new Date,o=S({currentDay:p.getDate(),month:p.getMonth(),year:p.getFullYear()}),i=w(()=>{const{_id:n,red:d,is_cube:e}=h.value,s=o.currentDay;return{date:`${s>=10?s:`0${s}`}.${o.month>=9?o.month+1:`0${o.month+1}`}.${o.year}`,id:n,day:s,month:o.month,year:o.year,red:d.indexOf(s)!==-1,is_cube:e.indexOf(s)!==-1}});return(n,d)=>l(h).year?(t(),a("section",{key:0,class:"calendar_day-container",onClick:d[0]||(d[0]=e=>n.$emit("openModal",i.value))},[l(c)?(t(),a("div",H)):r("",!0),l(c)?(t(),a("div",K)):r("",!0),_("div",Q,[_("div",{class:P({"calendar_day-circle":!0,red:l(h).red.indexOf(o.currentDay)!==-1})},null,2),_("img",{src:l(h).is_cube.indexOf(o.currentDay)===-1?l(R):l(W)},null,8,X)])])):r("",!0)}}),te=M(ee,[["__scopeId","data-v-8febb031"]]),se={class:"periodic-container"},ae={key:0,class:"periodic"},ne={key:0,class:"periodic-loader"},oe={class:"periodic-heading"},re={class:"periodic-date-block"},de={key:0,class:"periodic-date"},ce=k({__name:"DashboardPeriodic",setup(E){const f=A(),{periodic:h,periodicDateUpdating:c,periodicLoading:p}=$(f),o=w(()=>{const n=[],e=new Date().getDay();return h.value.forEach(s=>{let u=parseInt(s.dayNumber)+1;u===7&&(u=0);let y;e<=u&&(y=u-e),e>u&&(y=7-e+u),n.push({...s,daysLeft:y}),e===u&&(y=7,n.push({...s,daysLeft:y}))}),n}),i=n=>o.value.filter(s=>s.daysLeft===n);return(n,d)=>(t(),a("section",se,[o.value.length!==0?(t(),a("div",ae,[l(p)===!0||l(c).length!==0?(t(),a("div",ne)):r("",!0),(t(),a(D,null,g(2,e=>_("div",{class:"periodic-block",key:e},[_("p",oe,b(e===1?"Dzisiaj":"Jutro"),1),_("section",re,[i(e-1).length===0?(t(),a("p",de," --- ")):r("",!0),(t(!0),a(D,null,g(i(e-1),s=>(t(),a("p",{key:s.id,class:"periodic-date"},b(s.event),1))),128))])])),64))])):r("",!0)]))}}),ie=M(ce,[["__scopeId","data-v-924eebdf"]]),le={class:"dates-container"},ue={key:0,class:"dates"},_e={key:0,class:"dates-loader"},he={key:0,class:"dates-block"},pe={key:0,class:"dates-heading"},ye={key:1,class:"dates-heading"},fe={key:2,class:"dates-heading"},me={key:3,class:"dates-heading"},ve={class:"dates-date"},De={key:1,class:"dates"},ge={key:0,class:"dates-loader"},x=7,be=k({__name:"DashboardEvents",setup(E){const f=J(),{dates:h,datesDateUpdating:c,datesLoading:p}=$(f),o=w(()=>{const n=[],e=x*864e5,s=new Date,u=s.getMonth(),y=s.getFullYear(),L=new Date(y,u,s.getDate());s.getDay();const F=L.getTime();return h.value.forEach(m=>{const B=parseInt(m.day,10),z=parseInt(m.month,10)-1;let v=y;m.year&&(v=parseInt(m.year,10)),z<u&&v-y===1&&(v=y+1);const N=new Date(v,z,B),V=N.getTime()-F,Y=(N.getTimezoneOffset()-L.getTimezoneOffset())*60*1e3,C=V-Y;if(C<=e&&C>-1*864e5){const j=Math.round(C/864e5);n.push({...m,daysLeft:j})}}),n}),i=n=>o.value.filter(s=>s.daysLeft===n);return(n,d)=>(t(),a("section",le,[o.value.length!==0?(t(),a("div",ue,[l(p)===!0||l(c).length!==0?(t(),a("div",_e)):r("",!0),(t(!0),a(D,null,g(x+1,e=>(t(),a("section",{key:e},[i(e-1).length!==0?(t(),a("div",he,[e-1===0?(t(),a("p",pe,"Dzisiaj")):r("",!0),e-1===1?(t(),a("p",ye,"Jutro")):r("",!0),e-1>1&&e-1!==7?(t(),a("p",fe,b(`Za ${e-1} dni`),1)):r("",!0),e-1===7?(t(),a("p",me,"Za tydzień")):r("",!0),(t(!0),a(D,null,g(i(e-1),s=>(t(),a("span",{key:s.id},[_("p",ve,b(s.event),1)]))),128))])):r("",!0)]))),128))])):r("",!0),o.value.length===0?(t(),a("div",De,[l(p)===!0||l(c).length!==0?(t(),a("div",ge)):r("",!0),d[0]||(d[0]=_("div",{class:"dates-block"},[_("p",{class:"dates-placeholder"}," Brak nadchodzących wydarzeń w najbliższych siedmiu dniach ")],-1))])):r("",!0)]))}}),ke=M(be,[["__scopeId","data-v-9523e53b"]]),$e={class:"dashboard"},Me={class:"dashboard-bottom_container"},Ee=k({__name:"DashboardView",setup(E){const f=O(),{calendarLoading:h}=$(f),c=S({editModalOpen:!1,editedData:{}}),p=i=>{h.value||(c.editModalOpen=!0,c.editedData=i)},o=()=>{c.editModalOpen=!1,c.editedData={}};return U(()=>{const i=f.calendar,n=new Date,d=Number(n.getMonth())+1,e=Number(n.getFullYear());(Number(i.month)!==d||Number(i.year)!==e)&&O().getMonth({year:e,month:d})}),(i,n)=>(t(),T(q,null,{default:Z(()=>[_("div",$e,[c.editModalOpen?(t(),T(G,{key:0,data:c.editedData,onCloseModal:o},null,8,["data"])):r("",!0),_("section",Me,[I(te,{onOpenModal:p}),I(ie),I(ke)])])]),_:1}))}}),Ne=M(Ee,[["__scopeId","data-v-60ac06a0"]]);export{Ne as default};
